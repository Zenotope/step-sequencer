(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(e,t,n){e.exports={root:"Box_root__3wb8N",box:"Box_box__3XcKJ",checked:"Box_checked__FtauF",active:"Box_active__FZFXX",activechecked:"Box_activechecked__1J_cQ"}},,,,,,function(e,t,n){e.exports={root:"Buttons_root__OkpSj",wrapperTop:"Buttons_wrapperTop__32li6",wrapperBottom:"Buttons_wrapperBottom__1T4HC"}},function(e,t,n){e.exports={root:"Title_root__2Xc8l",info:"Title_info__3DHXa",landscape:"Title_landscape__2YZbI"}},function(e,t,n){e.exports={root:"PlayButton_root__egeke",label:"PlayButton_label__1kmG7"}},function(e,t,n){e.exports={root:"TimeSignature_root__3dXFM",length:"TimeSignature_length__29E66"}},function(e,t,n){e.exports={root:"TempoSlider_root__v3S9z",slider:"TempoSlider_slider__14cma"}},function(e,t,n){e.exports={root:"TempoDisplay_root__29aaI",label:"TempoDisplay_label__3-ob8"}},function(e,t,n){e.exports={root:"TapTempo_root__1Vk8_",label:"TapTempo_label__2XMp2"}},function(e,t,n){e.exports={root:"ResetButton_root__3LzA7",label:"ResetButton_label__1H7Jl"}},function(e,t,n){e.exports={root:"PitchSelect_root__1NRfw",select:"PitchSelect_select__3sHnq"}},,,,,,function(e,t,n){e.exports={root:"BoxRow_root__1SXJu",box:"BoxRow_box__BzG48",checked:"BoxRow_checked__3Md4w"}},function(e,t,n){e.exports={root:"StepSequence_root__12hd-"}},,,,,function(e,t,n){e.exports=n(44)},,,,,function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(22),r=n.n(c),l=(n(36),n(28)),s=n(23),i=n(24),p=n(30),u=n(27),m=n(29),h=n(2),g=n.n(h),d=n(4),v=n.n(d),f=n(12),_=n.n(f),E=function(e){return o.a.createElement("div",{className:v.a.chain([_.a.root,e.landscape&&_.a.landscape]).compact().join(" ").value()},"Step Sequencer")},T=n(13),y=n.n(T),b=n(7),w=function(e){return o.a.createElement("div",{className:y.a.root,onClick:e.onTogglePlay},o.a.createElement("span",{className:y.a.label},e.isPlaying?o.a.createElement(b.a,{icon:"stop"}):o.a.createElement(b.a,{icon:"play"})))},S=n(14),P=n.n(S),k=function(e){return o.a.createElement("div",{className:P.a.root},o.a.createElement("select",{name:"length",id:"row-length",className:P.a.length,value:e.sequenceLength,onChange:function(t){e.onLengthChange(t.target.value)}},o.a.createElement("option",{value:"2"},"2"),o.a.createElement("option",{value:"3"},"3"),o.a.createElement("option",{value:"4"},"4"),o.a.createElement("option",{value:"5"},"5"),o.a.createElement("option",{value:"6"},"6"),o.a.createElement("option",{value:"7"},"7"),o.a.createElement("option",{value:"8"},"8"),o.a.createElement("option",{value:"9"},"9"),o.a.createElement("option",{value:"10"},"10"),o.a.createElement("option",{value:"11"},"11")))},C=n(15),x=n.n(C),L=function(e){return o.a.createElement("div",{className:x.a.root},o.a.createElement("input",{type:"range",min:"30",max:"300",value:e.tempo,className:x.a.slider,onChange:function(t){e.onTempoChange(t.target.value)}}))},A=n(16),N=n.n(A),B=function(e){return o.a.createElement("div",{className:N.a.root},o.a.createElement("span",{className:N.a.label},e.tempo))},q=n(17),M=n.n(q),R=function(e){return o.a.createElement("div",{className:M.a.root,onClick:e.handleTap},o.a.createElement("span",{className:M.a.label},"Tap"))},D=n(18),j=n.n(D),F=function(e){return o.a.createElement("div",{className:j.a.root,onClick:e.onReset},o.a.createElement("span",{className:j.a.label},o.a.createElement(b.a,{icon:"recycle"})))},G=n(11),O=n.n(G),X=function(e){return o.a.createElement("div",{id:"buttons",className:O.a.root},o.a.createElement("div",{className:O.a.wrapperTop},o.a.createElement(w,{isPlaying:e.isPlaying,onTogglePlay:e.onTogglePlay}),o.a.createElement(k,{sequenceLength:e.sequenceLength,onLengthChange:e.onLengthChange}),o.a.createElement(F,{onReset:e.onReset})),o.a.createElement("div",{className:O.a.wrapperBottom},o.a.createElement(R,{handleTap:e.handleTap}),o.a.createElement(B,{tempo:e.tempo}),o.a.createElement(L,{tempo:e.tempo,onTempoChange:e.onTempoChange})))},J=n(25),z=n.n(J),H=n(19),I=n.n(H),V=function(e){return o.a.createElement("div",{className:I.a.root},o.a.createElement("select",{name:"pitch",id:"pitch",className:I.a.select,value:e.notes[e.row],onChange:function(t){e.onPitchSelect(t.target.value,e.row)}},o.a.createElement("option",{value:"G5"},"G5"),o.a.createElement("option",{value:"Gb5"},"Gb5"),o.a.createElement("option",{value:"F5"},"F5"),o.a.createElement("option",{value:"E5"},"E5"),o.a.createElement("option",{value:"Eb5"},"Eb5"),o.a.createElement("option",{value:"D5"},"D5"),o.a.createElement("option",{value:"Db5"},"Db5"),o.a.createElement("option",{value:"C5"},"C5"),o.a.createElement("option",{value:"B4"},"B4"),o.a.createElement("option",{value:"Bb4"},"Bb4"),o.a.createElement("option",{value:"A4"},"A4"),o.a.createElement("option",{value:"Ab4"},"Ab4"),o.a.createElement("option",{value:"G4"},"G4")))},Z=n(5),K=n.n(Z),Q=function(e){return o.a.createElement("div",{className:K.a.root},v.a.map(e.checked[e.row],function(t,n){return o.a.createElement("div",{onClick:function(){e.onToggle(n,e.row)},className:v.a.chain([K.a.box,t&&K.a.checked,e.isActive[e.row][n]&&!t&&K.a.active,e.isActive[e.row][n]&&t&&K.a.activechecked]).compact().join(" ").value(),key:n})}))},Y=function(e){return o.a.createElement("div",{className:z.a.root},o.a.createElement(V,{onPitchSelect:e.onPitchSelect,notes:e.notes,row:e.row}),o.a.createElement(Q,{checked:e.checked,row:e.row,isActive:e.isActive,onToggle:e.onToggle}))},U=n(26),W=n.n(U),$=function(e){return o.a.createElement("div",{id:"step-sequence",className:W.a.root},o.a.createElement(Y,{checked:e.checked,onToggle:e.onToggle,sequenceLength:e.sequenceLength,onPitchSelect:e.onPitchSelect,notes:e.notes,pitchConversion:e.pitchConversion,isActive:e.isActive,row:"0"}),o.a.createElement(Y,{checked:e.checked,onToggle:e.onToggle,sequenceLength:e.sequenceLength,onPitchSelect:e.onPitchSelect,notes:e.notes,isActive:e.isActive,row:"1"}))},ee=(n(43),n(3)),te=n(8),ne=n(20),ae=n.n(ne);function oe(e,t,n){var a=Object(m.a)(e);return a[n][t]=!a[n][t],a}var ce=new g.a.PolySynth(2,g.a.Synth).toMaster(),re=new AudioContext;ee.b.add(te.b),ee.b.add(te.d),ee.b.add(te.c),ee.b.add(te.a);var le=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={checked:[[!0,!0,!1,!1,!1,!1,!1],[!1,!1,!0,!1,!0,!1,!0]],isPlaying:!1,sequenceLength:7,tempo:120,maxTempo:300,isActive:[[0,0,0,1,0,1,0],[0,1,0,1,0,1,0]],renderedNotes:[],partContainer:[],notes:["Eb5","C5"],timeContainer:[],defaults:{tempo:120,sequenceLength:8,isPlaying:!1,elapsedTime:0,numberOfTaps:0,averageBPM:0,checked:[[!0,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!0,!1,!0,!1,!0,!1]],notes:["Eb5","C5"],isActive:[[0,1,0,1,0,1,0,1],[0,1,0,1,0,1,0,1]]},landscape:!1,velocity:.1},e.componentDidMount=function(){e.generateMetronome(),ae()(g.a.context),ae()(re),window.addEventListener("keydown",function(t){if(32===t.keyCode||13===t.keyCode)try{t.preventDefault(),e.onTogglePlay()}catch(t){console.log(t)}else if(84===t.keyCode)try{t.preventDefault(),e.handleTap()}catch(t){console.log(t)}}),window.screen.orientation&&90===Math.abs(window.screen.orientation.angle)&&window.screen.height<500&&e.setState({landscape:!0}),window.addEventListener("orientationchange",function(){90!==Math.abs(window.screen.orientation.angle)?e.setState({landscape:!1}):window.screen.height<500&&e.setState({landscape:!0})})},e.onToggleBox=function(t,n){e.setState(function(e){return{checked:oe(e.checked,t,n)}},function(){e.generateMetronome()})},e.onTogglePlay=function(){e.setState(function(e){return{isPlaying:!e.isPlaying}},function(){e.state.isPlaying?(g.a.Transport.loop=!0,g.a.Transport.loopStart=0,g.a.Transport.loopEnd=30*e.state.sequenceLength/e.state.tempo,g.a.Transport.start("+0.0"),console.log("playing")):(g.a.Transport.stop(),g.a.Transport.loop=!1,g.a.Transport.loopEnd=0,e.setState({isActive:[[],[]]},function(){return console.log("stopped")}))})},e.restartPlaying=function(){e.state.isPlaying?e.setState({isPlaying:e.state.isPlaying},function(){g.a.Transport.stop(),g.a.Transport.loopStart=0,g.a.Transport.loopEnd=30*e.state.sequenceLength/e.state.tempo,g.a.Transport.loop=!0,g.a.Transport.start("+0.0"),console.log("playing restarted")}):console.error("restartPlaying called while not playing")},e.onLengthChange=function(t){for(var n=[[],[]],a=0;a<t;a++)n[0].push(0===a),n[1].push(0!==a&&a%2===0);e.setState(function(){return{sequenceLength:t,checked:n}},function(){g.a.Transport.loopEnd=30*t/e.state.tempo,e.generateMetronome()})},e.onTempoChange=function(t){e.setState({tempo:t},function(){g.a.Transport.bpm.value=t})},e.onReset=function(){e.setState(function(e){return{tempo:e.defaults.tempo,sequenceLength:e.defaults.sequenceLength,isPlaying:e.defaults.isPlaying,checked:e.defaults.checked,notes:e.defaults.notes,isActive:e.defaults.isActive}},function(){e.resetTempo(),e.forceStop(),e.onLengthChange(e.state.sequenceLength),e.onPitchSelect(e.state.notes[0],0),e.onPitchSelect(e.state.notes[1],1)})},e.forceStop=function(){g.a.Transport.stop(),g.a.Transport.loop=!1,g.a.Transport.loopEnd=0,console.log("force stopped")},e.resetTempo=function(){g.a.Transport.bpm.value=e.state.defaults.tempo},e.handleTap=function(){var t=e.state.timeContainer;t.length>2&&t.shift(),t.push(re.currentTime.toFixed(3));var n=Math.round(60/(t.slice(1).map(function(e,n){return e-t[n]}).reduce(function(e,t){return e+t},0)/(t.length-1)));n>40&&n<301?e.setState({tempo:n},function(){return e.onTempoChange(n)}):n>300&&e.setState({tempo:e.state.maxTempo},function(){return e.onTempoChange(e.state.tempo)})},e.onPitchSelect=function(t,n){e.setState({notes:"0"===n?[t,e.state.notes[1]]:[e.state.notes[0],t]},function(){e.generateMetronome()})},e.generateMetronome=function(){var t=e.state.partContainer;t.forEach(function(e){return e.removeAll()});for(var n=Object(l.a)(e.state.notes,2),a=n[0],o=n[1],c=e.state.sequenceLength,r=e.state.checked,s=e.state.velocity,i=[],p=0;p<c;p++){var u=p/2;r[0][p]?i.push({note:a,time:"0:".concat(u),velocity:s,index:p}):r[1][p]||i.push({note:a,time:"0:".concat(u),velocity:0,index:p}),r[1][p]&&i.push({note:o,time:"0:".concat(u),velocity:s,index:p})}var m=new g.a.Part(function(t,n){e.triggerVisualize(n.index),ce.triggerAttackRelease(n.note,.05,t,n.velocity)},i).start(0);t.push(m),e.setState({renderedNotes:i,partContainer:t})},e.triggerVisualize=function(t){var n=e.state.sequenceLength,a=[v.a.fill(Array(n),0),v.a.fill(Array(n),0)];a[0][t]=1,a[1][t]=1,e.setState({isActive:a})},e}return Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(E,{landscape:this.state.landscape}),o.a.createElement(X,{isPlaying:this.state.isPlaying,onTogglePlay:this.onTogglePlay,sequenceLength:this.state.sequenceLength,onLengthChange:this.onLengthChange,tempo:this.state.tempo,onTempoChange:this.onTempoChange,onReset:this.onReset,handleTap:this.handleTap}),o.a.createElement($,{checked:this.state.checked,onToggle:this.onToggleBox,sequenceLength:this.state.sequenceLength,onPitchSelect:this.onPitchSelect,notes:this.state.notes,isActive:this.state.isActive})))}}]),n}(o.a.PureComponent);r.a.render(o.a.createElement(le,null),document.getElementById("root"))}],[[31,1,2]]]);
//# sourceMappingURL=main.aa7404a6.chunk.js.map